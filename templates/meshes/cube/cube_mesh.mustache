pi = 3.14159265;
n = {{n_elements}};
h = {{side_len}}/n;
Point(1) = {0,0,0,h};
Point(2) = { {{side_len}}, 0, 0, h };
Point(3) = { {{side_len}}, {{side_len}}, 0, h };
Point(4) = { 0, {{side_len}}, 0, h };
Line(1) = {1,2};
Line(2) = {2,3};
Line(3) = {3,4};
Line(4) = {4,1};
Line Loop(1) = {1,2,3,4};
Surface(1) = {1};
Transfinite Surface {1};
Recombine Surface {1};
Extrude {0, 0, {{side_len}}} {
    Surface{1}; Layers{n}; Recombine;
}
Physical Surface("Periodic") = {21,13,17,25,26,1};
Physical Volume("fluid") = {1};
Mesh.MshFileVersion = 2.2;
Mesh.ElementOrder = {{p_order}};
Mesh 3;
Periodic Surface {17} = {25} Translate { {{side_len}}, 0, 0 };
Periodic Surface {21} = {13} Translate { 0, {{side_len}}, 0 };
Periodic Surface {26} = {1} Translate { 0, 0, {{side_len}} };
